{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///home/misbah_ahmed/projects/hackathon%202%20phase%202/frontend/app/signin/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport axios from 'axios'; // Still need this for the signin call since it doesn't require auth yet\n\nexport default function SignIn() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const router = useRouter();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    console.log('Form submitted'); // Step 1\n    \n    setError(null);\n    setLoading(true);\n    console.log('Loading set to true'); // Step 2\n    \n    try {\n      console.log('Making API call...'); // Step 3\n      const response = await axios.post('http://localhost:8000/auth/login', {\n        email,\n        password,\n      });\n      console.log('API response received:', response.data); // Step 4\n      \n      // Extract and store token\n      const { access_token, user_id, email: userEmail } = response.data;\n      \n      // Store in localStorage\n      localStorage.setItem('access_token', access_token);\n      localStorage.setItem('user_id', user_id.toString());\n      localStorage.setItem('email', userEmail);\n      \n      // Verify token was stored\n      const storedToken = localStorage.getItem('access_token');\n      console.log('Token stored:', storedToken ? 'YES' : 'NO');\n      console.log('Stored token value:', storedToken);\n      \n      console.log('Attempting redirect...'); // Step 6\n      // Small delay to ensure token is properly stored\n      await new Promise(resolve => setTimeout(resolve, 100));\n      // Force redirect using window.location to ensure navigation\n      window.location.href = '/dashboard';\n      console.log('Redirect initiated'); // Step 7 - Should not appear if redirect works\n      \n    } catch (err: any) {\n      console.error('Full error object:', err); // Always log errors\n      console.error('Error response:', err.response);\n      console.error('Error request:', err.request);\n      \n      // Handle different error types\n      if (err.response) {\n        // Server responded with error status\n        setError(err.response.data?.detail || 'Authentication failed');\n      } else if (err.request) {\n        // Request was made but no response received\n        setError('Network error. Please try again.');\n      } else {\n        // Something else happened\n        setError('An unexpected error occurred');\n      }\n    } finally {\n      // Always reset loading state\n      setLoading(false);\n      console.log('Loading set to false'); // Step 8\n    }\n  };\n\n  return (\n    <div className=\"flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8\">\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <h2 className=\"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900\">\n          Sign in to your account\n        </h2>\n        <p className=\"mt-2 text-center text-sm text-gray-600\">\n          Or{' '}\n          <Link href=\"/signup\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\n            create a new account\n          </Link>\n        </p>\n      </div>\n\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n          {error && (\n            <div className=\"mb-4 rounded-md bg-red-50 p-4\">\n              <div className=\"flex\">\n                <div className=\"ml-3\">\n                  <h3 className=\"text-sm font-medium text-red-800\">{error}</h3>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <form className=\"space-y-6\" onSubmit={handleSubmit}>\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\n                Email address\n              </label>\n              <div className=\"mt-1\">\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  required\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  className=\"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\n                Password\n              </label>\n              <div className=\"mt-1\">\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type=\"password\"\n                  autoComplete=\"current-password\"\n                  required\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center\">\n                <input\n                  id=\"remember-me\"\n                  name=\"remember-me\"\n                  type=\"checkbox\"\n                  className=\"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500\"\n                />\n                <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-900\">\n                  Remember me\n                </label>\n              </div>\n\n              <div className=\"text-sm\">\n                <a href=\"#\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\n                  Forgot your password?\n                </a>\n              </div>\n            </div>\n\n            <div>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"flex w-full justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50\"\n              >\n                {loading ? 'Signing in...' : 'Sign in'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}